<?xml version="1.0" encoding="UTF-8"?>
<project default="bundle_jar" name="Create Mac OS Application">
	
	<taskdef name="jarbundler"
		classpath="./build.lib/MacOS/jarbundler-2.1.0.jar"
		classname="net.sourceforge.jarbundler.JarBundler" />
	
    <target name="bundle_jar">
        <jarbundler dir="."
        	name="NuntiumLocalGateway"
        	mainclass="org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader"
        	jar="NuntiumLocalGateway.jar"
        	stubfile="./build.lib/MacOS/JavaApplicationStub"
        	icon="./build.lib/MacOS/Network Alt.icns"
        	version="${Version}">
        	<javafilelist dir="lib" files="librxtxSerial.jnilib" />
        </jarbundler>
    	<tar compression="gzip" destfile="build/NuntiumLocalGateway-MacOS.tar.gz" >
    		<tarfileset
    			includes="NuntiumLocalGateway.app/**"
    			excludes="NuntiumLocalGateway.app/Contents/MacOS/JavaApplicationStub" dir="." />
    		<tarfileset
    			includes="NuntiumLocalGateway.app/Contents/MacOS/JavaApplicationStub" dir="."
    			mode="755" />
    	</tar>
    </target>

	
</project>